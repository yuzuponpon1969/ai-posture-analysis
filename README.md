# 🧍 AI姿勢分析アプリ（ケンダル法）

MediaPipe Poseを使用したブラウザベースの姿勢評価アプリケーション。  
理学療法で広く使われる**ケンダル法（Kendall's Posture Assessment）**に基づいた静止姿勢の評価を行います。

## 🎯 特徴

- ✅ **画像アップロード** - 静止画像から姿勢を解析
- ✅ **Webカメラ撮影** - リアルタイムで姿勢を撮影・評価
- ✅ **側面観評価** - 6つの評価項目で姿勢を分析
  - 頭部前方位（Forward Head Posture）
  - 肩の位置（Shoulder Position）
  - 脊柱アライメント（Spinal Alignment）
  - 骨盤傾斜（Pelvic Tilt）
  - 膝の位置（Knee Position）
  - 足首アライメント（Ankle Alignment）
- ✅ **スコアリング** - 理学療法の標準的な基準値に基づく評価
- ✅ **視覚的フィードバック** - 骨格検出結果の表示
- 🔜 **Googleスライドレポート** - 評価結果の自動レポート生成（開発中）

## 📂 プロジェクト構造

```
ai-gait-analysis/
├── index.html                    # メインHTML
├── vite.config.js                # Vite設定
├── package.json                  # 依存関係
├── src/
│   ├── main.js                   # エントリーポイント
│   ├── styles/
│   │   └── main.css              # スタイルシート
│   ├── pose/
│   │   └── PoseDetector.js       # MediaPipe Pose統合
│   ├── analysis/
│   │   └── KendallAnalyzer.js    # ケンダル法評価ロジック
│   ├── ui/
│   │   └── UIController.js       # UI制御
│   └── utils/
│       └── (ユーティリティ関数)
├── gas/
│   └── Code.gs                   # Google Apps Script（開発中）
└── docs/
    └── (ドキュメント)
```

## 🚀 セットアップ

### 1. リポジトリのクローン

```bash
git clone https://github.com/yuzuponpon1969/ai-posture-analysis.git
cd ai-posture-analysis
```

### 2. 依存関係のインストール

```bash
npm install
```

### 3. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:3000` にアクセスしてください。

### 4. ビルド（本番環境用）

```bash
npm run build
```

ビルドされたファイルは `dist/` ディレクトリに出力されます。

## 📖 使い方

### 画像アップロード

1. 「📁 画像アップロード」タブを選択
2. 側面観の姿勢画像をドラッグ＆ドロップ、またはクリックしてファイルを選択
3. 「🔍 姿勢を解析」ボタンをクリック
4. 評価結果を確認

### Webカメラ撮影

1. 「📷 Webカメラ撮影」タブを選択
2. 「📹 カメラを起動」ボタンをクリック
3. カメラの前で側面を向いて姿勢を整える
4. 「📸 撮影する」ボタンをクリック
5. 「🔍 姿勢を解析」ボタンをクリック
6. 評価結果を確認

## 🧪 評価項目の詳細

### 1. 頭部前方位（Forward Head Posture）
- **評価基準**: 耳孔が肩の真上にあるか
- **理想値**: 水平距離 0.03以内
- **問題**: 頭部前方位は首・肩の痛みの原因となる

### 2. 肩の位置（Shoulder Position）
- **評価基準**: 肩が耳孔と股関節の中間にあるか
- **理想値**: 偏差 0.02以内
- **問題**: 肩の位置異常は肩こりや姿勢不良の原因となる

### 3. 脊柱アライメント（Spinal Alignment）
- **評価基準**: 肩と股関節を結ぶ線が垂直に近いか
- **理想値**: 垂直（90度）から±5度以内
- **問題**: 脊柱アライメント異常は腰痛や側弯症の原因となる

### 4. 骨盤傾斜（Pelvic Tilt）
- **評価基準**: 骨盤が中間位（前後傾なし）にあるか
- **理想値**: 垂直から±5度以内
- **問題**: 骨盤の前傾・後傾は腰痛の原因となる

### 5. 膝の位置（Knee Position）
- **評価基準**: 膝が股関節の真下にあるか
- **理想値**: 水平距離 0.03以内
- **問題**: 膝の位置異常は膝痛や歩行障害の原因となる

### 6. 足首アライメント（Ankle Alignment）
- **評価基準**: 足首が膝の真下にあるか
- **理想値**: 水平距離 0.03以内
- **問題**: 足首のアライメント異常は転倒リスクを高める

## 🎨 技術スタック

- **フロントエンド**: Vanilla JavaScript (ES6+)
- **ビルドツール**: Vite
- **姿勢検出**: MediaPipe Pose
- **UI**: HTML5 Canvas, CSS3
- **レポート**: Google Apps Script（開発中）

## 📝 開発状況

- [x] プロジェクト基本構造
- [x] MediaPipe Pose統合
- [x] 画像アップロード機能
- [x] Webカメラ撮影機能
- [x] 側面観評価（6項目）
- [x] スコアリングシステム
- [ ] 後面観評価（開発予定）
- [ ] Googleスライドレポート生成
- [ ] 履歴管理機能

## 🤝 貢献

プルリクエストやイシューの報告を歓迎します！

## 📄 ライセンス

MIT License

## 👤 開発者

[@yuzuponpon1969](https://github.com/yuzuponpon1969)

---

**注意**: このアプリは理学療法の補助ツールとして設計されていますが、専門家の診断に代わるものではありません。
