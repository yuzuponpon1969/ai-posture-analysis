<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediaPipe Pose Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        #status {
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .loading { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>MediaPipe Pose èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ</h1>
    <div id="status" class="loading">ãƒ†ã‚¹ãƒˆä¸­...</div>
    <div id="details"></div>

    <script type="module">
        const statusEl = document.getElementById('status');
        const detailsEl = document.getElementById('details');

        async function testMediaPipe() {
            try {
                statusEl.textContent = '1. @mediapipe/poseã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆä¸­...';
                const { Pose } = await import('@mediapipe/pose');
                
                detailsEl.innerHTML += '<p>âœ… @mediapipe/poseã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆæˆåŠŸ</p>';
                
                statusEl.textContent = '2. Poseã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆä¸­...';
                const pose = new Pose({
                    locateFile: (file) => {
                        const path = `https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.5.1675469404/${file}`;
                        detailsEl.innerHTML += `<p>ğŸ“‚ Loading: ${file} from ${path}</p>`;
                        return path;
                    }
                });
                
                detailsEl.innerHTML += '<p>âœ… Poseã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆæˆåŠŸ</p>';
                
                statusEl.textContent = '3. ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šä¸­...';
                pose.setOptions({
                    modelComplexity: 1,
                    smoothLandmarks: true,
                    minDetectionConfidence: 0.5,
                    minTrackingConfidence: 0.5
                });
                
                detailsEl.innerHTML += '<p>âœ… ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®šæˆåŠŸ</p>';
                
                statusEl.textContent = 'âœ… ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ã¾ã—ãŸï¼';
                statusEl.className = 'success';
                
            } catch (error) {
                statusEl.textContent = 'âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ';
                statusEl.className = 'error';
                detailsEl.innerHTML += `<p style="color: red;">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</p>`;
                detailsEl.innerHTML += `<pre>${error.stack}</pre>`;
                console.error(error);
            }
        }

        testMediaPipe();
    </script>
</body>
</html>
